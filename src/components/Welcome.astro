---
import astroLogo from "../assets/astro.svg";
import background from "../assets/background.svg";

const projectName =
	import.meta.env.PUBLIC_PROJECT_NAME || new URL(Astro.url).hostname;
const tagline = import.meta.env.PUBLIC_TAGLINE || "";
const githubUrl = import.meta.env.PUBLIC_GITHUB_URL || "";
const contactMailTo = import.meta.env.PUBLIC_CONTACT_MAIL_TO || "";
const creatorLabel = import.meta.env.PUBLIC_CREATOR_LABEL || "Made by";
const creatorLink = import.meta.env.PUBLIC_CREATOR_LINK || "";
const lightEmoji = "ðŸŒ”";
const darkEmoji = "ðŸŒ’";
---

<div
	class="flex flex-col justify-center items-center h-[calc(100vh-80px)] text-center px-4"
>
	<h1 class="text-4xl sm:text-5xl md:text-6xl font-bold text-shadow-lg">{projectName}</h1>
	{
		tagline && (
			<p class="text-sm sm:text-base md:text-lg lg:text-xl leading-relaxed mt-2 sm:mt-4 text-shadow">
				{tagline}
			</p>
		)
	}
	<hr
		class="my-4 sm:my-6 md:my-8 w-full border-slate-300 dark:border-slate-700"
	/>
	<div class="flex flex-col sm:flex-row gap-6 sm:gap-8 md:gap-12">
		{
			githubUrl && (
					<a
						href={githubUrl}
						target="_blank"
						class="text-3xl sm:text-4xl md:text-5xl hover:opacity-75 transition-opacity text-shadow"
						title="GitHub"
					>
						<span class="sr-only">GitHub</span>ðŸ’»
					</a>
			)
		}
		{
			contactMailTo && (
					<a
						href={`mailto:${contactMailTo}`}
						class="text-3xl sm:text-4xl md:text-5xl hover:opacity-75 transition-opacity text-shadow"
						title="Contact"
					>
						<span class="sr-only">Email</span>ðŸ“§
					</a>
			)
		}
	</div>
</div>

<footer
	class="fixed bottom-0 left-0 right-0 h-20 flex justify-center items-center border-t border-slate-300 dark:border-slate-700"
>
	<button
		id="theme-toggle"
		aria-label="Toggle dark/light mode"
		class="mr-4 text-shadow-md"
		data-light-emoji={lightEmoji}
		data-dark-emoji={darkEmoji}
	>
		{darkEmoji}
	</button><br>
	{
		creatorLink && (
				<a href={creatorLink} target="_blank" class="text-shadow">
					{creatorLabel}
				</a>
		)
	}
</footer>

<script>
	const toggle = document.getElementById("theme-toggle");
	const html = document.documentElement;

	// Read emoji values from data-attributes (set by server-side/frontmatter)
	const lightEmoji = toggle?.dataset?.lightEmoji ?? "â˜€ï¸";
	const darkEmoji = toggle?.dataset?.darkEmoji ?? "ðŸŒ™";

	// Load saved theme preference and initialize button text
	const savedTheme = localStorage.getItem("theme");
	if (savedTheme === "light") {
		html.classList.remove("dark");
		toggle && (toggle.textContent = lightEmoji);
	} else {
		toggle &&
			(toggle.textContent = html.classList.contains("dark")
				? darkEmoji
				: lightEmoji);
	}

	// Toggle theme on button click
	toggle?.addEventListener("click", () => {
		html.classList.toggle("dark");
		const isDark = html.classList.contains("dark");
		localStorage.setItem("theme", isDark ? "dark" : "light");
		toggle.textContent = isDark ? darkEmoji : lightEmoji;
	});
</script>
